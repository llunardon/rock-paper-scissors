<!doctype html>

<html lang="en">
<head>
    <meta charset="utf-8">
</head>

<body>
    <script>
        //generate an integer between min and max (included)
        function randomIntRange(min, max) {
            min = Math.ceil(min);
            max = Math.floor(max);
            return Math.floor(Math.random() * (max - min + 1) ) + min;
        }                      
        //generate a random choice for the round
        function computerPlay() {
            let n = randomIntRange(1,3);

            switch (n) {
                case 1:
                    return "rock";
                case 2:
                    return "paper";
                case 3:
                    return "scissors";
                default:
                    return "invalid round";
            }
        }
        //play a single round of Rock-Paper-Scissors
        function playRound(playerSelection, computerSelection) {
            //convert both strings to lowercase 
            playerSelection = playerSelection.toLowerCase(); 
            console.log("Hai scelto: " + playerSelection);
            computerSelection = computerSelection.toLowerCase();
            console.log("Il computer ha scelto: " + computerSelection);

            //all possible outcomes
            if (playerSelection === "paper" & computerSelection === "rock") {
                return "You win! Paper beats Rock.";
            } 
            else if (playerSelection === "paper" & computerSelection === "paper") {
                return "Tie! Paper against Paper.";
            } 
            else if (playerSelection === "paper" & computerSelection === "scissors") {
                return "You lose! Scissors beat paper.";
            } 
            else if (playerSelection === "rock" & computerSelection === "paper") {
                return "You lose! Paper beats rock.";
            } 
            else if (playerSelection === "rock" & computerSelection === "scissors") {
                return "You win! Rock beats scissors.";
            } 
            else if (playerSelection === "rock" & computerSelection === "rock") {
                return "Tie! Rock against Rock.";
            } 
            else if (playerSelection === "scissors" & computerSelection === "scissors") {
                return "Tie! Scissors against Scissors.";
            } 
            else if (playerSelection === "scissors" & computerSelection === "rock") {
                return "You lose! Rock beats Scissors";
            } 
            else if (playerSelection === "scissors" & computerSelection === "paper") {
                return "You win! Scissors beat Paper.";
            } 
            else {
                return "rps failed";
            }
        }
        //play an entire game (5 rounds)
        function game() {
            //defining variables
            let choice;
            let compChoice;
            let outStr;
            let playerScore = 0;
            let computerScore = 0;
            
            //simulate a round
            choice = prompt("Rock, Paper, Scissors?");
            compChoice = computerPlay();
            outStr = playRound(choice, compChoice);
            console.log(outStr);

            choice = prompt("Rock, Paper, Scissors?");
            compChoice = computerPlay();
            outStr = playRound(choice, compChoice);
            console.log(outStr);

            choice = prompt("Rock, Paper, Scissors?");
            compChoice = computerPlay();
            outStr = playRound(choice, compChoice);
            console.log(outStr);

            choice = prompt("Rock, Paper, Scissors?");
            compChoice = computerPlay();
            outStr = playRound(choice, compChoice);
            console.log(outStr);

            choice = prompt("Rock, Paper, Scissors?");
            compChoice = computerPlay();
            outStr = playRound(choice, compChoice);
            console.log(outStr);

            //update scores
            if (outStr.includes("win")) {
                playerScore++;
            }
            else if (outStr.includes("lose")) {
                computerScore++;
            }

            //decide the winner
            if (playerScore > computerScore) {
                return "You won the game!";
            }
            else if (playerScore < computerScore) {
                return "You lost the game!";
            }
            else {
                return "It's a tie!";
            }
        }
    </script>
</body>
</html>
